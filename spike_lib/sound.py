from pybricks.tools import wait

class Sound:
    def __init__(self, hub):
        self.hub = hub
        self.songs = {
            "funkytown": [
                [440, 100], [440, 100], [587, 100], [440, 100], [415, 100], [415, 100], [554, 100], [415, 100],
                [370, 100], [370, 100], [493, 100], [370, 100], [440, 200], [370, 100], [440, 200]
            ],
            "megalovania": [
                [293,150],[293,150],[587,150],[440,150],[415,150],[392,150],[349,150],[293,150],
                [349,150],[392,150],[293,300],
                
                [293,150],[293,150],[587,150],[440,150],[415,150],[392,150],[349,150],[293,150],
                [349,150],[392,150],[293,300],
                
                [587,150],[587,150],[523,150],[440,150],[415,150],[392,150],[349,150],[293,150],
                [349,150],[392,150],[293,300],
                
                [293,150],[293,150],[587,150],[440,150],[415,150],[392,150],[349,150],[293,150],
                [349,150],[392,150],[293,300],

                # second section
                [880,150],[880,150],[831,150],[784,150],[740,150],[698,150],[659,150],[622,150],
                [659,150],[698,150],[784,300],
                
                [587,150],[587,150],[523,150],[440,150],[415,150],[392,150],[349,150],[293,150],
                [349,150],[392,150],[293,300],

                # final loop / ending
                [587,150],[587,150],[523,150],[440,150],[415,150],[392,150],[349,150],[293,150],
                [349,150],[392,150],[293,600]
            ]
        }

    def play(self, song_name, mult=1):
        if song_name in self.songs:
            notes = self.songs[song_name]
            for i in notes:
                self.hub.speaker.beep(i[0], i[1] * mult)
                wait(i[1] * mult)
        else:
            print(f"Song '{song_name}' not found.")

    def beep(self, frequency=440, duration=100):
        self.hub.speaker.beep(frequency, duration)

Sound.play("megalovania", mult=0.5)